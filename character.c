#include "screen.h"
#include "character.h"
#include <stdio.h>
unsigned char number[] = {
/*--  文字:  0  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xE0,0x0F,0xF0,
0x1C,0x38,0x3C,0x3C,0x3C,0x1C,0x78,0x1C,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,
0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1C,0x38,0x3C,
0x3C,0x3C,0x1C,0x38,0x0F,0xF0,0x07,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  1  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x03,0xC0,
0x1F,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,
0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,
0x03,0xC0,0x03,0xC0,0x03,0xE0,0x1F,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  2  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xF0,0x1E,0x78,
0x38,0x3C,0x38,0x1C,0x78,0x1C,0x78,0x1C,0x7C,0x1C,0x38,0x1C,0x00,0x3C,0x00,0x38,
0x00,0x70,0x00,0xF0,0x01,0xE0,0x03,0xC0,0x07,0x80,0x0F,0x00,0x0E,0x06,0x1C,0x0E,
0x38,0x0C,0x70,0x1C,0x7F,0xFC,0x7F,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  3  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xE0,0x1C,0xF0,
0x38,0x78,0x38,0x3C,0x38,0x3C,0x38,0x3C,0x00,0x3C,0x00,0x38,0x00,0x78,0x01,0xF0,
0x07,0xE0,0x00,0xF8,0x00,0x38,0x00,0x1C,0x00,0x1E,0x00,0x1E,0x38,0x1E,0x78,0x1E,
0x78,0x1C,0x38,0x3C,0x3C,0xF8,0x0F,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  4  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x70,
0x00,0xF0,0x01,0xF0,0x01,0xF0,0x03,0xF0,0x03,0x70,0x07,0x70,0x0E,0x70,0x0C,0x70,
0x1C,0x70,0x18,0x70,0x38,0x70,0x70,0x70,0x60,0x70,0xFF,0xFF,0x00,0x70,0x00,0x70,
0x00,0x70,0x00,0x70,0x00,0xF8,0x07,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  5  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xFC,0x1F,0xFC,
0x38,0x00,0x38,0x00,0x38,0x00,0x38,0x00,0x38,0x00,0x39,0xC0,0x3F,0xF0,0x3E,0x78,
0x38,0x3C,0x38,0x1C,0x00,0x1E,0x00,0x1E,0x00,0x1E,0x38,0x1E,0x78,0x1E,0x78,0x1C,
0x78,0x1C,0x38,0x3C,0x1E,0x78,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  6  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xF0,0x0F,0x38,
0x1E,0x3C,0x1C,0x3C,0x38,0x18,0x38,0x00,0x78,0x00,0x78,0x00,0x7F,0xF0,0x7F,0xF8,
0x7C,0x3C,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x78,0x1E,0x38,0x1E,
0x3C,0x1C,0x1C,0x1C,0x1F,0x78,0x07,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  7  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0xFE,0x3F,0xFE,
0x38,0x1C,0x30,0x18,0x70,0x38,0x20,0x30,0x00,0x70,0x00,0x60,0x00,0xE0,0x00,0xE0,
0x01,0xC0,0x01,0xC0,0x03,0xC0,0x03,0x80,0x03,0x80,0x03,0x80,0x07,0x80,0x07,0x80,
0x07,0x80,0x07,0x80,0x07,0x80,0x07,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  8  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xF0,0x1E,0x78,
0x38,0x1C,0x78,0x1C,0x70,0x1E,0x70,0x1E,0x78,0x1C,0x3C,0x1C,0x3E,0x38,0x1F,0xF0,
0x0F,0xE0,0x1D,0xF8,0x38,0xF8,0x78,0x3C,0x70,0x1E,0x70,0x1E,0x70,0x1E,0x70,0x1E,
0x70,0x1C,0x38,0x1C,0x1E,0x78,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,

/*--  文字:  9  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xE0,0x1E,0xF0,
0x38,0x38,0x78,0x3C,0x78,0x1C,0x70,0x1E,0x70,0x1E,0x70,0x1E,0x70,0x1E,0x78,0x1E,
0x78,0x3E,0x78,0x7E,0x3F,0xFE,0x1F,0xDE,0x00,0x1E,0x00,0x1C,0x00,0x3C,0x18,0x38,
0x3C,0x38,0x3C,0x70,0x3D,0xE0,0x1F,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00 };
unsigned char point[] = {/*--  文字:  .  --*/
/*--  宋体24;  此字体下对应的点阵为：宽x高=16x33   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x3C,0x00,0x7E,0x00,0x7E,0x00,0x3C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00};

void CharacterDisplay(const char hanzi[], int x0, int y0, int w, int h, int num)
{
	int dian = 0; //第 dian 个像素点
	int i;
	for (i = 0; i < num; i++)
	{
		int x, y;
		for (; dian < w * h * (i + 1); dian++)
		{
			//要在屏幕上的合适位置上显示 这个 dian
			//int x, y; //(x,y)这个dian像素点，在屏幕上的显示位置。

			//dian在原始汉字的 第  dian / w 行
			y = y0 + (dian - i * w * h) / w;

			//dian在原始汉字的 第  dian % w 列
			x = x0 + dian % w;


			//dian这个像素点取模后的数据 在 数组hanzi[]的第几个元素中呢?
			int index = dian / 8; //表示数组元素的下标

			// hanzi[index] 包括了 8个bit位，那你这个dian在第几bit位呢？
			int bit = 7 - dian % 8; //你在字节中的第几bit

			//int color; //这个像素点要显示的颜色

			if (hanzi[index] & (1 << bit))
			{
				//该像素点 在笔划上
				XY_Color(x, y, 0);
			}
			else
			{
				//该像素点  不在笔划上
			}
		}
		x0 += w;
	}
}

void DisplayNum(int x0, int y0, int num)
{
	if (num<0)
	{
		return;
	}
	int nums[255] = { 0 };
	int i;
	for (i = 0; num != 0; i++)
	{
		nums[i] = num % 10;
		num /= 10;
	}//此时nums数组内第i位数据位数最大

	int dian; //第 dian 个像素点
	int j;

	//16x33的文字大小。
	int w = 16;
	int h = 33;
	for (j = i - 1; j >= 0; j--)
	{

		int x, y;
		//printf("%d ", j);

		for (dian = nums[j] * w * h; dian < w * h * (nums[j] + 1); dian++)
		{

			//要在屏幕上的合适位置上显示 这个 dian
			//int x, y; //(x,y)这个dian像素点，在屏幕上的显示位置。

			//dian在原始汉字的 第  dian / w 行
			y = y0 + (dian - nums[j] * w * h) / w;

			//dian在原始汉字的 第  dian % w 列
			x = x0 + dian % w;


			//dian这个像素点取模后的数据 在 数组hanzi[]的第几个元素中呢?
			int index = dian / 8; //表示数组元素的下标

			// hanzi[index] 包括了 8个bit位，那你这个dian在第几bit位呢？
			int bit = 7 - dian % 8; //你在字节中的第几bit

			//int color; //这个像素点要显示的颜色

			if (number[index] & (1 << bit))
			{
				//该像素点 在笔划上
				XY_Color(x, y, 0XFFFFFF);
			}
			else
			{
				//该像素点  不在笔划上
				XY_Color(x, y, 0);
			}
		}
		x0 += w;
	}
}

void DisplayDoubleNum(int x0, int y0, double num, int decision)
{
	int i, temp, n = 1;
	for (i = 0; i < decision; i++)
	{
		n *= 10;
	}
	temp = num * n;
	DisplayNum(x0, y0, temp / n);

}